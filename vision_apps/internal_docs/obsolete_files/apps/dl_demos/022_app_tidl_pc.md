# Pixel Classification Application {#group_apps_dl_demos_app_tidl_pixel_classification}

# Introduction

This application shows a demo of pixel level classification algorithm. The demo takes as
input a sequence of .bmp images of size 768x384 pixels. A trained network runs using OpenVx and TIDL to perform semantic segmentation on the input image. There are 5 classes in semantic segmentation, namely "background", "road", "sky", "pedestrian", "vehicles".

# Supported plaforms

Platform  | Linux x86_64 | Linux+RTOS mode | SoC
----------|--------------|-----------------|------
Support   | YES          | YES             | J721e

# Data flow

\image html app_tidl_pc_data_flow.jpg

# Steps to run the application on J721e EVM

-# Build the application and related libraries as mentioned in \ref BUILD_INSTRUCTIONS
-# A sample config file "app_seg.cfg" is provided under "/opt/vision_apps/" folder on the rootfs partition.
-# Edit config file to modify the fields as required
    -# Modify "tidl_config_file_path" to point to tidl_io_<network_name>.bin generated by TIDL import tool
    -# Modify "tidl_network_file_path" to point to tidl_net_<network_name>.bin generated by TIDL import tool
    -# Modify "input_file_path" to provide location of input .bmp files
    -# Modify "input_file_list" to provide the location of names.txt file. Preferably this is kept in the same location as .bmp files.
    -# Modify "output_file_path" for the application to save a copy of the rendered output. Make sure this folder is created before running the demo.
    -# For semantic segmentation demo the num_input_tensors must default to a value of 1
    -# For semantic segmentation demo the num_output_tensors must default to a value of 1
    -# For semantic segmentation demo the num_clases must default to a value of 5
    -# For semantic segmentation demo the width of the input image must default to a value of 768
    -# For semantic segmentation demo the height of the input image must default to a value of 384
    -# For semantic segmentation demo the dl_width of the input image must default to a value of 768
    -# For semantic segmentation demo the dl_height of the input image must default to a value of 384
    -# Enable or disable output writing by using the en_out_img_write flag. Default is disabled
    -# Enable or disable dump of TIDL output by using raw_tidl_op flag. Default is disabled.
    -# Switch between 8bit or 16bit input by using tidl_8bit_16bit_flag flag. Default is 8-bit input
    -# Switch between RGB or YUV input by using ip_rgb_or_yuv flag. Default is RGB input
    -# Switch between RGB or YUV output by using op_rgb_or_yuv flag. Default is RGB output
    -# Enable or disable flag display_option to toggle displaying output on a HDMI/eDP monitor
    -# The application iterates over the list of files provided in the names.txt but also has the option to re-iterate over the same list. Control this by programming num_iterations. Eg. If there are 10 files in names.txt and num_iterations = 100, the demo will run for 1000 iterations in total.
    -# Use the is_interactive flag to run the demo in an interactive mode which allows the user to print performance characteristics on the UART console.
-# Run the app as shown below
   \code
   ./vx_app_tidl_pixel_classification --cfg app_seg.cfg
   \endcode
-# View the output images in any image viewer

# Sample Output

Shown below is a example input and its corresponding output.

\image html app_tidl_seg_output.jpg
