# Object Detection Application {#group_apps_dl_demos_app_tidl_object_detection}

# Introduction

This application shows a demo of parking spot detect or vehicle detect algorithm. The demo takes as input a sequence of .bmp images of size 512x512 pixels. A trained network runs using OpenVx and TIDL to detect the parking spots or vehicles in the input image. The detected parking spots or vehicles are overlayed on the input and displayed on a monitor or written to a file.

# Supported plaforms

Platform  | Linux x86_64 | Linux+RTOS mode | SoC
----------|--------------|-----------------|------
Support   | YES          | YES             | J721e

# Data flow

\image html app_tidl_od_data_flow.jpg

# Steps to run the application

-# Build the application and related libraries as mentioned in \ref BUILD_INSTRUCTIONS
-# A sample config file "app_psd.cfg" for parking spot detection and "app_vd.cfg" for vehicle detection is provided under "/opt/vision_apps/" folder on the rootfs partition.
-# Edit config file to modify the fields as required
    -# Modify "tidl_config_file_path" to point to tidl_io_<network_name>.bin generated by TIDL import tool
    -# Modify "tidl_network_file_path" to point to tidl_net_<network_name>.bin generated by TIDL import tool
    -# Modify "input_file_path" to provide location of input .bmp files
    -# Modify "input_file_list" to provide the location of names.txt file. Preferably this is kept in the same location as .bmp files.
    -# Modify "output_file_path" for the application to save a copy of the rendered output. Make sure this folder is created before running the demo.
    -# For object detection demo the width of the input image must default to a value of 512
    -# For object detection demo the height of the input image must default to a value of 512
    -# For object detection demo the dl_width of the input image must default to a value of 512
    -# For object detection demo the dl_height of the input image must default to a value of 512
    -# Use the viz_th parameter to control the number of objects rendered for visualization. Setting higher value will only render objects with a high score, this might lead to fewer detections. Setting a lower value will render many objects which might increase chances of false detections being shown.
    -# Enable or disable output writing by using the en_out_img_write flag. Default is disabled
    -# Enable or disable dump of TIDL output by using raw_tidl_op flag. Default is disabled.
    -# Switch between RGB or YUV input by using ip_rgb_or_yuv flag. Default is RGB input
    -# Enable or disable flag display_option to toggle displaying output on a HDMI/eDP monitor
    -# The application iterates over the list of files provided in the names.txt but also has the option to re-iterate over the same list. Control this by programming num_iterations. Eg. If there are 10 files in names.txt and num_iterations = 100, the demo will run for 1000 iterations in total.
    -# Use the is_interactive flag to run the demo in an interactive mode which allows the user to print performance characteristics on the UART console.

-# Run the app as shown below for PSD or VD
   \code
   ./vx_app_tidl_object_detection --cfg app_psd.cfg
   ./vx_app_tidl_object_detection --cfg app_vd.cfg
   \endcode
-# View the output images in any image viewer

# Sample Output

Shown below is a example input and its corresponding output

\image html app_tidl_psd_output.jpg

\image html app_tidl_vd_output.jpg
